<% layout('layouts/notAuthorized') -%>
<div class="text-center w-75 m-auto">
    <a>
        <span><img src="<%= siteUrl %>/logo.png" alt="<%= siteTitle %>" style="height: 80px; width: 80px"></span>
    </a>
    <p class="text-muted mb-4 mt-3"></p>
</div>
<form  action="<%=siteUrl%>/auth/reset-password?email=<%=email%>" method="post">
  
    <div class="row newdata" > 
        <div class="col-lg-12">
            <div class="form-group">
                <label class="label">New Password<span style="color: red !important;">*</span></label>
                <input type="password" class="form-control" id="password" placeholder="New Password" name="newPassword" required autocomplete="off">
                <div class="text-danger newPassword"></div>
            </div>
            <div class="form-group">
                <label class="label">Confirm Password<span style="color: red !important;">*</span></label>
                <input type="password" class="form-control" id="confirm-password" placeholder="Confirm Password" name="confirmPassword" required autocomplete="off">
                <div class="text-danger confirmPassword"></div>
            </div>

            <div class="form-group mb-0 text-center">
                <button type="submit"  class="btn btn-primary submit-btn btn-block" >Submit</button>
            </div>
        </div>
    </div> 
</form>

<!-- <script>
    $(document).ready(function () {


        $('#validate-otp').on('click',function(){

            var otp = $('#otp').val();
            if(otp != ''){
                $.ajax({
                    url: "<%= siteUrl %>/auth/validate-otp?email=<%= email %>&otp="+otp, 
                    success: function(result){
                        if(result.data){
                            $('.otpdata').hide();
                            $('.newdata').show();
                        }else{
                            alert('Incorrect OTP! Please try again.')
                        }
                    }
                });
            }
            
        });

        const ADMIN_RESET_PASSWORD_FORM = <% JSON.stringify(DM('ADMIN_RESET_PASSWORD_FORM')) %>;
        $("#passwordUpdateForm").validate({
            errorPlacement: function (error, element) {
                const name = $(element).attr("name");
                error.appendTo($("." + name));
            },
            submitHandler: function (form) {
                $('#change-password-submit').attr('disabled', 'disabled');
                form.submit();
            },
            rules: {
                otp: {
                    required: true,
                    minlength: 4,
                    maxlength: 4,
                },
                newPassword: {
                    required: true,
                    pattern: /^(?=(.*[a-zA-Z])+)(?=(.*[0-9])+).{8,}$/
                },
                confirmPassword: {
                    required: true,
                    pattern: /^(?=(.*[a-zA-Z])+)(?=(.*[0-9])+).{8,}$/,
                    equalTo: "#password"
                }
            },
            messages: ADMIN_RESET_PASSWORD_FORM
        });
    })
</script> -->